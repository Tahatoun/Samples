[ApiController]
[Route("entities")]
public class EntitiesController : ControllerBase
{
    private readonly AppDbContext _context;

    public EntitiesController(AppDbContext context)
    {
        _context = context;
    }

    [HttpGet]
    public IActionResult GetEntities()
    {
        // Simule appel Ulysse pour l’instant
        var entities = new List<object>
        {
            new { Id = 1, Name = "BNP Paris-Bas", Region = "Métropole" }
        };

        return Ok(entities);
    }

    [HttpGet("{entityId}/options")]
    public async Task<IActionResult> GetOptionsByEntity(decimal entityId)
    {
        var options = await _context.EntityStockOptions
                                    .Where(o => o.EntityId == entityId)
                                    .ToListAsync();

        return Ok(options);
    }
}
